<app-kt-list-page [title]="'Orders'" [addurl]="'/pages/orders/add'" (onFilter)="filters = !filters">
  <form [formGroup]="form" *ngIf="filters">
    <formly-form [form]="form" [fields]="fields" [model]="model"></formly-form>
    <button type="submit" class="btn btn-secondary mt-4">search</button>
  </form>

  <hr *ngIf="filters" />

  <app-kt-app-list-page-table
    [columns]="columns"
    [currentPage]="crudService.page"
    [totalPages]="crudService.lastPage"
    (pageChange)="changePage($event)"
    [selectAll]="selectAll"
    (changeSelectAll)="changeSelectAll($event)"
    (actionDeleteAll)="deleteAll($event)"
  >
    <tr *ngFor="let item of crudService.list; let i = index">
      <td>
        <div class="d-flex">
          <div class="ms-4">
            <a class="fs-7 fw-bold text-hover-primary fs-5 fw-bold mb-1">{{ item?.order_number }}</a>
          </div>
        </div>
      </td>
      <td>
        <div class="d-flex">
          <div class="ms-4">
            <a class="fs-7 fw-bold text-hover-primary fs-5 fw-bold mb-1">{{ item?.customer.name }}</a>
          </div>
        </div>
      </td>
      <td>
        <div class="d-flex">
          <div class="ms-4">
            <a class="fs-7 fw-bold text-hover-primary fs-5 fw-bold mb-1">{{ item?.customer.phone }}</a>
          </div>
        </div>
      </td>

      <!-- <td>
        <div *ngFor="let products of item.products" class="d-flex">
          <div  class="ms-5">
            <a class="text-muted fs-7 fw-bold text-hover-primary fs-5 fw-bold mb-1">${{products?.price }}   </a>
          </div>
        </div>
      </td> -->
      <td>
        <div class="d-flex" class="ms-4">
          <div class="fs-7 fw-bold">${{ item?.total_price }}</div>
        </div>
      </td>

      <td>
        <div class="d-flex">
          <div class="fw-bold me-auto px-4 py-3">{{ item?.customer_phone }}</div>
        </div>
      </td>
      <td>
        <div class="d-flex">
          <div class="fw-bold me-auto px-4 py-3">{{ item.status }}</div>
        </div>
      </td>
      <td>
        <div class="d-flex">
          <div class="badge badge-light-primary fw-bold me-auto px-4 py-3">{{ item.status }}</div>
        </div>
      </td>

      <!-- <ng-content></ng-content> -->
      <!--begin::Action=-->
      <td class="text-end">
        <div class="d-flex flex-row justify-content-end align-items-center gap-3">
          <i class="ti ti-eye" style="font-size: 24px; cursor: pointer" (click)="openDetails(i)"></i>
          <!-- <i *ngIf="showEdit" class="ti ti-edit" style="font-size: 24px; cursor: pointer" (click)="openEditDetails(i)"></i> -->
          <i *ngIf="showEdit" class="ti ti-trash" style="font-size: 24px; cursor: pointer" (click)="deleteRow(i)"></i>
        </div>
      </td>
      <!--end::Action=-->
      <!--begin::Checkbox-->
      <td>
        <div class="form-check form-check-sm form-check-custom form-check-solid">
          <input
            class="form-check-input"
            type="checkbox"
            [value]="item.selected"
            [checked]="item.selected"
            (change)="checkboxUpdate(i, $event)"
          />
        </div>
      </td>
      <!--end::Checkbox-->
      <!--end::Table row-->
    </tr>
  </app-kt-app-list-page-table>
</app-kt-list-page>
